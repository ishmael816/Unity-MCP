# Unity Dev Agent (UDA) â€” å·¥ä½œæ€»ç»“ & ä½¿ç”¨æŒ‡å—

> **ç‰ˆæœ¬**: v1.0  
> **æ—¥æœŸ**: 2026-02-26  
> **æ¶æ„**: æ··åˆæ–¹æ¡ˆ â€” MCP å·¥å…· + Agent System Promptï¼Œç”± AI å®¢æˆ·ç«¯é©±åŠ¨

---

## ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
2. [å·²å®Œæˆå·¥ä½œæ€»è§ˆ](#2-å·²å®Œæˆå·¥ä½œæ€»è§ˆ)
3. [ç³»ç»Ÿæ¶æ„](#3-ç³»ç»Ÿæ¶æ„)
4. [æ–°å¢æ–‡ä»¶æ¸…å•](#4-æ–°å¢æ–‡ä»¶æ¸…å•)
5. [MCP å·¥å…·è¯´æ˜](#5-mcp-å·¥å…·è¯´æ˜)
6. [MCP Prompt è¯´æ˜](#6-mcp-prompt-è¯´æ˜)
7. [åœ¨ Kimi Code ä¸­ä½¿ç”¨](#7-åœ¨-kimi-code-ä¸­ä½¿ç”¨)
8. [åœ¨ Cursor ä¸­ä½¿ç”¨](#8-åœ¨-cursor-ä¸­ä½¿ç”¨)
9. [åœ¨ Claude Desktop ä¸­ä½¿ç”¨](#9-åœ¨-claude-desktop-ä¸­ä½¿ç”¨)
10. [ç«¯åˆ°ç«¯ä½¿ç”¨æµç¨‹](#10-ç«¯åˆ°ç«¯ä½¿ç”¨æµç¨‹)
11. [å¸¸è§é—®é¢˜](#11-å¸¸è§é—®é¢˜)

---

## 1. é¡¹ç›®æ¦‚è¿°

**Unity Dev Agent (UDA)** æ˜¯ä¸€ä¸ªåŸºäº [Unity-MCP](https://github.com/IvanMurzak/Unity-MCP) çš„è‡ªä¸» AI å¼€å‘ä»£ç†ç³»ç»Ÿã€‚å®ƒåˆ©ç”¨ **ReAct (Reasoning + Acting)** ç­–ç•¥ï¼Œé€šè¿‡ MCP åè®®ç›´æ¥æ“ä½œ Unity Editorï¼Œå®ç°ï¼š

- ğŸ”„ **è‡ªä¸»å¼€å‘å¾ªç¯**: éœ€æ±‚ç†è§£ â†’ ä»£ç ç”Ÿæˆ â†’ ç¼–è¯‘ä¿®å¤ â†’ è¿è¡Œæ—¶éªŒè¯ â†’ äº¤ä»˜
- ğŸ›¡ï¸ **è‡ªæˆ‘ä¿®å¤**: ç¼–è¯‘å¤±è´¥æ—¶è‡ªåŠ¨åˆ†æé”™è¯¯å¹¶ä¿®å¤ï¼ˆæœ€å¤š 10 è½®ï¼‰
- ğŸ“¸ **è§†è§‰éªŒè¯**: é€šè¿‡æˆªå›¾ + æ—¥å¿—åˆ†æç»¼åˆåˆ¤æ–­å¼€å‘æˆæœ
- ğŸ’¾ **çŠ¶æ€æŒä¹…åŒ–**: è·¨ Domain Reload ä¿å­˜ä»»åŠ¡è¿›åº¦
- ğŸ”’ **åœºæ™¯å®‰å…¨**: éªŒè¯å‰è‡ªåŠ¨å¤‡ä»½åœºæ™¯ï¼Œå¤±è´¥å¯å›æ»š

**é¦–ä¸ªéªŒè¯ç”¨ä¾‹**: é“è·¯ç”Ÿæˆå·¥å…·ï¼ˆRoad Generation Toolï¼‰â€” åŸºäº BÃ©zier æ›²çº¿çš„ç¨‹åºåŒ–é“è·¯ Mesh ç”Ÿæˆã€‚

---

## 2. å·²å®Œæˆå·¥ä½œæ€»è§ˆ

### Phase A â€” åŸºç¡€è®¾æ–½ âœ…

| ç»„ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| `agent-task-save` å·¥å…· | âœ… å®Œæˆ | å°† Agent ä»»åŠ¡çŠ¶æ€æŒä¹…åŒ–åˆ° `SessionState` |
| `agent-task-load` å·¥å…· | âœ… å®Œæˆ | ä» `SessionState` æ¢å¤ä»»åŠ¡çŠ¶æ€ |
| `compilation-status` å·¥å…· | âœ… å®Œæˆ | æŸ¥è¯¢å½“å‰ç¼–è¯‘çŠ¶æ€ï¼ˆæ— éœ€è§¦å‘ç¼–è¯‘ï¼‰ |

> **è¯´æ˜**: `compilation-wait` å·¥å…·è¢«æ ‡è®°ä¸ºæ— éœ€ç‹¬ç«‹å®ç°ï¼Œå› ä¸º `script-update-or-create` å·²å†…ç½® Processing æ¨¡å¼è‡ªåŠ¨å¤„ç†ç¼–è¯‘ç­‰å¾…ã€‚

### Phase B â€” Agent Prompt âœ…

| ç»„ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| `react-dev-agent` æ ¸å¿ƒ Prompt | âœ… å®Œæˆ | å®šä¹‰ ReAct å››é˜¶æ®µå¾ªç¯ç­–ç•¥ |
| `road-generation-tool` é¢†åŸŸ Prompt | âœ… å®Œæˆ | é“è·¯ç”Ÿæˆå·¥å…·é¢†åŸŸçŸ¥è¯†ï¼ˆBÃ©zier æ•°å­¦ã€Mesh ç®—æ³•ç­‰ï¼‰ |

### Phase C â€” éªŒè¯æ¨¡å— âœ…

| ç»„ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| `scene-save-backup` å·¥å…· | âœ… å®Œæˆ | éªŒè¯å‰è‡ªåŠ¨å¤‡ä»½åœºæ™¯ |
| `scene-restore-backup` å·¥å…· | âœ… å®Œæˆ | éªŒè¯å¤±è´¥åæ¢å¤åœºæ™¯ |
| è§†è§‰åˆ†ææ¡†æ¶ | âœ… å®Œæˆ | å†…ç½®åœ¨æ ¸å¿ƒ Prompt ä¸­ |
| é”™è¯¯ä¿®å¤ç­–ç•¥è¡¨ | âœ… å®Œæˆ | å†…ç½®åœ¨æ ¸å¿ƒ Prompt ä¸­ |

### Phase D â€” é›†æˆæµ‹è¯• â³ å¾…æ‰§è¡Œ

- [ ] åŠ è½½ Prompt å¹¶å‘èµ·é“è·¯ç”Ÿæˆå·¥å…·ç«¯åˆ°ç«¯å¼€å‘
- [ ] éªŒè¯å®Œæ•´çš„ SPEC â†’ BUILD â†’ VERIFY â†’ DELIVER é—­ç¯

---

## 3. ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           AI å®¢æˆ·ç«¯ (Kimi Code / Cursor / Claude Desktop)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ç”¨æˆ·å‘é€: "å¸®æˆ‘å¼€å‘ä¸€ä¸ªé“è·¯ç”Ÿæˆå·¥å…·"                          â”‚  â”‚
â”‚  â”‚  AI åŠ è½½: react-dev-agent + road-generation-tool Prompt       â”‚  â”‚
â”‚  â”‚  AI è¿›å…¥: ReAct å››é˜¶æ®µå¾ªç¯ (SPEC â†’ BUILD â†’ VERIFY â†’ DELIVER) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚ MCP åè®®                              â”‚
â”‚                              â–¼                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Unity-MCP-Server (.NET 9.0, stdio/streamableHttp)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ åŸæœ‰ 52 ä¸ªå·¥å…·  â”‚  â”‚ UDA æ–°å¢ 5 ä¸ªå·¥å…· â”‚  â”‚ UDA æ–°å¢ 2 ä¸ª Promptâ”‚  â”‚
â”‚  â”‚ (script/scene/ â”‚  â”‚ (agent-task-*,   â”‚  â”‚ (react-dev-agent,  â”‚  â”‚
â”‚  â”‚  screenshot/   â”‚  â”‚  compilation-*,  â”‚  â”‚  road-generation-  â”‚  â”‚
â”‚  â”‚  console/...)  â”‚  â”‚  scene-backup-*) â”‚  â”‚  tool)             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚ SignalR                                â”‚
â”‚                              â–¼                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Unity-MCP-Plugin (Unity 2022.3+)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Editor API: Script / Screenshot / Console / Scene / Tests    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒæ€æƒ³**: AI å®¢æˆ·ç«¯ä¸­çš„ LLM æ˜¯ Agent çš„"å¤§è„‘"ï¼ŒSystem Prompt æ˜¯"ç­–ç•¥"ï¼ŒMCP å·¥å…·æ˜¯"æ‰‹è„š"ã€‚ä¸éœ€è¦ç‹¬ç«‹çš„ Agent è¿›ç¨‹ã€‚

---

## 4. æ–°å¢æ–‡ä»¶æ¸…å•

æ‰€æœ‰æ–‡ä»¶ä½äº Unity-MCP-Plugin é¡¹ç›®ä¸­ï¼š

```
Unity-MCP-Plugin/Assets/root/Editor/Scripts/API/
â”œâ”€â”€ Prompt/
â”‚   â”œâ”€â”€ DevAgent.cs                    # ğŸ§  ReAct æ ¸å¿ƒ System Prompt
â”‚   â””â”€â”€ DevAgent.RoadGeneration.cs     # ğŸ›£ï¸ é“è·¯ç”Ÿæˆé¢†åŸŸçŸ¥è¯† Prompt
â”‚
â””â”€â”€ Tool/
    â”œâ”€â”€ AgentTask.cs                   # ğŸ“‹ Agent ä»»åŠ¡å·¥å…· - partial class å®šä¹‰
    â”œâ”€â”€ AgentTask.Save.cs              # ğŸ’¾ agent-task-save å·¥å…·å®ç°
    â”œâ”€â”€ AgentTask.Load.cs              # ğŸ“‚ agent-task-load å·¥å…·å®ç°
    â”œâ”€â”€ Compilation.cs                 # âš™ï¸ ç¼–è¯‘å·¥å…· - partial class å®šä¹‰
    â”œâ”€â”€ Compilation.Status.cs          # ğŸ“Š compilation-status å·¥å…·å®ç°
    â”œâ”€â”€ Scene.Backup.Save.cs           # ğŸ”’ scene-save-backup å·¥å…·å®ç°
    â””â”€â”€ Scene.Backup.Restore.cs        # ğŸ”„ scene-restore-backup å·¥å…·å®ç°
```

---

## 5. MCP å·¥å…·è¯´æ˜

### 5.1 `agent-task-save`

| å±æ€§ | å€¼ |
|------|-----|
| **ç”¨é€”** | å°† Agent å½“å‰ä»»åŠ¡çŠ¶æ€æŒä¹…åŒ–ï¼Œè·¨ Domain Reload ä¿å­˜ |
| **å­˜å‚¨ä½ç½®** | `UnityEditor.SessionState`ï¼ˆåŒ Session å†…æœ‰æ•ˆï¼‰ |
| **å‚æ•°** | `taskName` (string): ä»»åŠ¡å”¯ä¸€æ ‡è¯†<br>`stateJson` (string): JSON æ ¼å¼çš„ä»»åŠ¡çŠ¶æ€ |
| **è¿”å›** | ä¿å­˜æˆåŠŸç¡®è®¤æ¶ˆæ¯ |

**å…¸å‹ç”¨æ³•**ï¼ˆAgent è‡ªåŠ¨è°ƒç”¨ï¼‰:
```json
{
  "taskName": "RoadGenerator",
  "stateJson": "{\"phase\":\"BUILD\",\"iteration\":3,\"completedFiles\":[\"RoadData.cs\"]}"
}
```

### 5.2 `agent-task-load`

| å±æ€§ | å€¼ |
|------|-----|
| **ç”¨é€”** | ä» SessionState æ¢å¤ä¹‹å‰ä¿å­˜çš„ä»»åŠ¡çŠ¶æ€ |
| **å‚æ•°** | `taskName` (string): ä»»åŠ¡å”¯ä¸€æ ‡è¯† |
| **è¿”å›** | JSON æ ¼å¼çš„ä»»åŠ¡çŠ¶æ€ï¼Œæˆ–"æœªæ‰¾åˆ°"æç¤º |

### 5.3 `compilation-status`

| å±æ€§ | å€¼ |
|------|-----|
| **ç”¨é€”** | æŸ¥è¯¢å½“å‰ Unity ç¼–è¯‘çŠ¶æ€ï¼Œä¸è§¦å‘ç¼–è¯‘ |
| **å‚æ•°** | æ—  |
| **è¿”å›** | `isCompiling` (bool), `scriptCompilationFailed` (bool), é”™è¯¯åˆ—è¡¨ |

### 5.4 `scene-save-backup`

| å±æ€§ | å€¼ |
|------|-----|
| **ç”¨é€”** | åœ¨éªŒè¯å‰åˆ›å»ºå½“å‰åœºæ™¯çš„å¤‡ä»½å‰¯æœ¬ |
| **å®ç°** | ä½¿ç”¨ `AssetDatabase.CopyAsset` å¤åˆ¶ä¸º `*_UDA_backup.unity` |
| **å‚æ•°** | `openedSceneName` (string, å¯é€‰): è¦å¤‡ä»½çš„åœºæ™¯åï¼Œé»˜è®¤ä¸ºå½“å‰æ´»åŠ¨åœºæ™¯ |
| **è¿”å›** | å¤‡ä»½æ–‡ä»¶è·¯å¾„ |

### 5.5 `scene-restore-backup`

| å±æ€§ | å€¼ |
|------|-----|
| **ç”¨é€”** | ä»å¤‡ä»½æ¢å¤åœºæ™¯ï¼ˆéªŒè¯å¤±è´¥æ—¶ä½¿ç”¨ï¼‰ |
| **å®ç°** | æ‰“å¼€å¤‡ä»½åœºæ™¯ â†’ è¦†ç›–å›åŸè·¯å¾„ â†’ åˆ é™¤å¤‡ä»½æ–‡ä»¶ |
| **å‚æ•°** | `sceneName` (string, å¯é€‰): è¦æ¢å¤çš„åœºæ™¯å |
| **è¿”å›** | æ¢å¤æˆåŠŸç¡®è®¤æ¶ˆæ¯ |

---

## 6. MCP Prompt è¯´æ˜

### 6.1 `react-dev-agent` â€” æ ¸å¿ƒ Agent Prompt

**MCP åç§°**: `react-dev-agent`  
**æ–‡ä»¶**: `DevAgent.cs`

å®šä¹‰äº† UDA çš„å®Œæ•´å·¥ä½œç­–ç•¥ï¼š

```
Phase 1: SPEC  â€” éœ€æ±‚åˆ†æ + æŠ€æœ¯ Spec ç”Ÿæˆï¼ˆæœ€å¤š 3 è½® Q&Aï¼‰
Phase 2: BUILD â€” ä»£ç ç”Ÿæˆ + ç¼–è¯‘å¾ªç¯ï¼ˆæœ€å¤š 10 è½®ä¿®å¤ï¼‰
Phase 3: VERIFY â€” è¿è¡Œæ—¶éªŒè¯ï¼ˆæˆªå›¾ + æ—¥å¿— + å•å…ƒæµ‹è¯•ï¼‰
Phase 4: DELIVER â€” äº¤ä»˜æŠ¥å‘Š + ä½¿ç”¨æŒ‡å—
```

å†…ç½®åŠŸèƒ½ï¼š
- ğŸ“‹ å·¥å…·è°ƒç”¨é€ŸæŸ¥è¡¨ï¼ˆ20+ å·¥å…·çš„ç”¨é€”æ˜ å°„ï¼‰
- ğŸ” ReAct è¾“å‡ºæ ¼å¼ï¼ˆğŸ”è§‚å¯Ÿ â†’ ğŸ§ æ€è€ƒ â†’ ğŸ¯è¡ŒåŠ¨ â†’ ğŸ”„åæ€ï¼‰
- âš¡ ä¿®å¤ç­–ç•¥è‡ªåŠ¨é€‰æ‹©ï¼ˆåŸºäºé”™è¯¯æ¨¡å¼åŒ¹é…ï¼‰
- ğŸ’¾ ä¸Šä¸‹æ–‡ç®¡ç†æŒ‡å—ï¼ˆä½•æ—¶ save/load ä»»åŠ¡çŠ¶æ€ï¼‰
- ğŸ›¡ï¸ ç¡¬æ€§è§„åˆ™ï¼ˆä¸è·³é˜¶æ®µã€å…ˆè¯»åæ”¹ã€è¿­ä»£é™åˆ¶ç­‰ï¼‰

### 6.2 `road-generation-tool` â€” é“è·¯ç”Ÿæˆé¢†åŸŸ Prompt

**MCP åç§°**: `road-generation-tool`  
**æ–‡ä»¶**: `DevAgent.RoadGeneration.cs`

æä¾›é“è·¯ç”Ÿæˆå·¥å…·çš„é¢†åŸŸçŸ¥è¯†ï¼š

- ğŸ“ æ¨èæ–‡ä»¶æ¶æ„ï¼ˆ5 ä¸ªæ–‡ä»¶ï¼šRoadData / BezierUtils / RoadMeshBuilder / RoadGeneratorWindow / RoadComponentï¼‰
- ğŸ“ BÃ©zier æ›²çº¿æ•°å­¦å…¬å¼ï¼ˆäºŒæ¬¡ & ä¸‰æ¬¡ï¼‰
- ğŸ”§ Mesh ç”Ÿæˆä¼ªä»£ç ï¼ˆé¡¶ç‚¹ã€ä¸‰è§’é¢ã€UV è®¡ç®—ï¼‰
- ğŸ–¼ï¸ EditorWindow UI å¸ƒå±€ç¤ºæ„
- âœ… éªŒè¯æ ‡å‡†ï¼ˆè§†è§‰ + æ—¥å¿— + å¸¸è§é™·é˜±ï¼‰

---

## 7. åœ¨ Kimi Code ä¸­ä½¿ç”¨

### 7.1 å‰ç½®æ¡ä»¶

1. **å®‰è£… Unity-MCP-Server**:
   ```bash
   dotnet tool install -g com.IvanMurzak.Unity.MCP.Server
   ```

2. **åœ¨ Unity é¡¹ç›®ä¸­å®‰è£… Unity-MCP-Plugin**:
   - é€šè¿‡ Unity Package Manager å®‰è£…ï¼ˆå‚è§ [Unity-MCP README](https://github.com/IvanMurzak/Unity-MCP)ï¼‰

3. **ç¡®ä¿ Unity Editor å·²æ‰“å¼€å¹¶è¿è¡Œ**

### 7.2 é…ç½® MCP Server

åœ¨ Kimi Code çš„ MCP é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼ˆé€šå¸¸åœ¨ `settings.json` æˆ– MCP é…ç½®ç•Œé¢ä¸­ï¼‰:

```json
{
  "mcpServers": {
    "unity-dev-agent": {
      "command": "unity-mcp-server",
      "env": {
        "MCP_PLUGIN_CLIENT_TRANSPORT": "stdio",
        "MCP_PLUGIN_PORT": "8080",
        "MCP_PLUGIN_CLIENT_TIMEOUT": "10000"
      }
    }
  }
}
```

### 7.3 ä½¿ç”¨ Agent

è¿æ¥æˆåŠŸåï¼Œåœ¨ Kimi Code å¯¹è¯ä¸­ï¼š

**ç¬¬ä¸€æ­¥ â€” åŠ è½½ Agent Prompt**:

å‘Šè¯‰ AI ä½¿ç”¨ MCP Promptï¼š
```
è¯·ä½¿ç”¨ MCP Prompt "react-dev-agent" å’Œ "road-generation-tool"ï¼Œå¸®æˆ‘å¼€å‘ä¸€ä¸ªé“è·¯ç”Ÿæˆå·¥å…·ã€‚
```

æˆ–è€…æ‰‹åŠ¨ç²˜è´´ Prompt å†…å®¹ï¼ˆå¦‚æœ AI å®¢æˆ·ç«¯ä¸æ”¯æŒè‡ªåŠ¨åŠ è½½ MCP Promptï¼‰ï¼š
```
è¯·å…ˆè°ƒç”¨ MCP è·å– prompt "react-dev-agent" çš„å†…å®¹ï¼Œç„¶åæŒ‰ç…§å…¶ä¸­å®šä¹‰çš„æµç¨‹å·¥ä½œã€‚
```

**ç¬¬äºŒæ­¥ â€” ä¸ Agent äº¤äº’**:

Agent è¿›å…¥ Phase 1 (SPEC)ï¼Œä¼šä¸»åŠ¨è¯¢é—®ä½ çš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼š

```
Agent: æˆ‘å·²è¿›å…¥ SPEC é˜¶æ®µã€‚å…³äºé“è·¯ç”Ÿæˆå·¥å…·ï¼Œæˆ‘æœ‰ä»¥ä¸‹é—®é¢˜ï¼š
1. é“è·¯ç±»å‹åå¥½ï¼Ÿï¼ˆç›´çº¿ / æ›²çº¿ / ä¸¤è€…å…¼å…·ï¼‰
2. æ˜¯å¦éœ€è¦ EditorWindow ç•Œé¢ï¼Ÿ
3. é“è·¯å®½åº¦çš„é»˜è®¤å€¼å’ŒèŒƒå›´ï¼Ÿ

ä½ : éœ€è¦æ›²çº¿é“è·¯ï¼Œè¦æœ‰ EditorWindowï¼Œé»˜è®¤å®½åº¦ 4 ç±³ï¼ŒèŒƒå›´ 1-20 ç±³ã€‚
```

**ç¬¬ä¸‰æ­¥ â€” ç¡®è®¤ Specï¼Œå¼€å§‹å¼€å‘**:

Agent ç”ŸæˆæŠ€æœ¯ Spec åç­‰å¾…ä½ ç¡®è®¤ï¼š
```
ä½ : ç¡®è®¤ï¼Œå¼€å§‹å¼€å‘ã€‚
```

Agent è‡ªåŠ¨è¿›å…¥ BUILD â†’ VERIFY â†’ DELIVER é˜¶æ®µã€‚

---

## 8. åœ¨ Cursor ä¸­ä½¿ç”¨

### 8.1 é…ç½® MCP Server

åœ¨ Cursor è®¾ç½®ä¸­é…ç½® MCPï¼ˆ`Settings â†’ MCP`ï¼‰ï¼Œæ·»åŠ æœåŠ¡å™¨ï¼š

```json
{
  "mcpServers": {
    "unity-dev-agent": {
      "command": "unity-mcp-server",
      "env": {
        "MCP_PLUGIN_CLIENT_TRANSPORT": "stdio",
        "MCP_PLUGIN_PORT": "8080",
        "MCP_PLUGIN_CLIENT_TIMEOUT": "10000"
      }
    }
  }
}
```

### 8.2 ä½¿ç”¨æ–¹å¼

åœ¨ Cursor çš„ Chatï¼ˆ`Cmd/Ctrl + L`ï¼‰æˆ– Composer ä¸­ï¼š

```
@unity-dev-agent è¯·ä½¿ç”¨ react-dev-agent promptï¼Œå¸®æˆ‘å¼€å‘ä¸€ä¸ªé“è·¯ç”Ÿæˆå·¥å…·ã€‚
åŒæ—¶åŠ è½½ road-generation-tool prompt ä½œä¸ºé¢†åŸŸçŸ¥è¯†ã€‚
```

Cursor æ”¯æŒ MCP å·¥å…·è°ƒç”¨ï¼ŒAgent ä¼šè‡ªåŠ¨ï¼š
- è°ƒç”¨ `script-update-or-create` ç”Ÿæˆä»£ç 
- è°ƒç”¨ `compilation-status` æ£€æŸ¥ç¼–è¯‘
- è°ƒç”¨ `screenshot-scene-view` æˆªå›¾éªŒè¯
- è°ƒç”¨ `console-get-logs` æ£€æŸ¥æ—¥å¿—

### 8.3 Cursor Rules å¢å¼ºï¼ˆå¯é€‰ï¼‰

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.cursorrules` æ–‡ä»¶ï¼Œå¢åŠ  Agent è¡Œä¸ºæç¤ºï¼š

```
å½“ç”¨æˆ·è¯·æ±‚å¼€å‘ Unity å·¥å…·æ—¶ï¼Œä½¿ç”¨ MCP çš„ "react-dev-agent" prompt å®šä¹‰çš„
ReAct å››é˜¶æ®µæµç¨‹ã€‚æ¯ä¸ªæ“ä½œæ­¥éª¤ä½¿ç”¨ ğŸ”ğŸ§ ğŸ¯ğŸ”„ æ ¼å¼è¾“å‡ºæ¨ç†è¿‡ç¨‹ã€‚
ä»£ç ç”Ÿæˆåˆ° Assets/AutoGenerated/{ToolName}/ ç›®å½•ã€‚
```

---

## 9. åœ¨ Claude Desktop ä¸­ä½¿ç”¨

### 9.1 é…ç½®æ–‡ä»¶

ç¼–è¾‘ Claude Desktop é…ç½®æ–‡ä»¶ï¼š

- **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`
- **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
- **Linux**: `~/.config/Claude/claude_desktop_config.json`

```json
{
  "mcpServers": {
    "unity-dev-agent": {
      "command": "unity-mcp-server",
      "env": {
        "MCP_PLUGIN_CLIENT_TRANSPORT": "stdio",
        "MCP_PLUGIN_PORT": "8080",
        "MCP_PLUGIN_CLIENT_TIMEOUT": "10000"
      }
    }
  }
}
```

### 9.2 ä½¿ç”¨æ–¹å¼

é‡å¯ Claude Desktop åï¼Œç›´æ¥å¯¹è¯ï¼š

```
è¯·å…ˆè·å– MCP prompt "react-dev-agent"ï¼Œç„¶åæŒ‰ç…§å…¶ä¸­çš„æµç¨‹å¸®æˆ‘å¼€å‘ä¸€ä¸ª Unity é“è·¯ç”Ÿæˆå·¥å…·ã€‚
åŒæ—¶è·å– "road-generation-tool" prompt ä½œä¸ºé¢†åŸŸå‚è€ƒã€‚
```

---

## 10. ç«¯åˆ°ç«¯ä½¿ç”¨æµç¨‹

ä»¥ä¸‹æ˜¯å®Œæ•´çš„ä½¿ç”¨æ­¥éª¤ï¼Œé€‚ç”¨äºæ‰€æœ‰ AI å®¢æˆ·ç«¯ï¼š

### Step 0: ç¯å¢ƒå‡†å¤‡

```bash
# 1. å®‰è£… MCP Server
dotnet tool install -g com.IvanMurzak.Unity.MCP.Server

# 2. ç¡®è®¤å®‰è£…æˆåŠŸ
unity-mcp-server --help
```

- åœ¨ Unity ä¸­å®‰è£… Unity-MCP-Pluginï¼ˆé€šè¿‡ Package Managerï¼‰
- æ‰“å¼€ Unity Editorï¼Œç¡®è®¤ MCP è¿æ¥æ­£å¸¸ï¼ˆUnity Console æ— æŠ¥é”™ï¼‰

### Step 1: é…ç½® AI å®¢æˆ·ç«¯

æŒ‰ç…§ä¸Šè¿° [ç¬¬7](#7-åœ¨-kimi-code-ä¸­ä½¿ç”¨)ã€[ç¬¬8](#8-åœ¨-cursor-ä¸­ä½¿ç”¨) æˆ– [ç¬¬9](#9-åœ¨-claude-desktop-ä¸­ä½¿ç”¨) èŠ‚é…ç½® MCP Serverã€‚

### Step 2: å¯åŠ¨ Agent

åœ¨ AI å®¢æˆ·ç«¯ä¸­å‘èµ·å¯¹è¯ï¼š

```
è¯·ä½¿ç”¨ MCP prompt "react-dev-agent" ä½œä¸ºä½ çš„å·¥ä½œç­–ç•¥ï¼Œ
åŒæ—¶åŠ è½½ "road-generation-tool" ä½œä¸ºé¢†åŸŸçŸ¥è¯†ã€‚

ä»»åŠ¡ï¼šå¸®æˆ‘å¼€å‘ä¸€ä¸ª Unity é“è·¯ç”Ÿæˆå·¥å…·ã€‚
```

### Step 3: Phase 1 â€” SPECï¼ˆéœ€æ±‚é˜¶æ®µï¼‰

Agent ä¼šä¸»åŠ¨æé—®ï¼Œæ”¶é›†éœ€æ±‚ã€‚å›ç­”å Agent ç”ŸæˆæŠ€æœ¯ Specã€‚

```
ä½ : ç¡®è®¤ï¼Œå¼€å§‹å¼€å‘ã€‚
```

### Step 4: Phase 2 â€” BUILDï¼ˆç¼–è¯‘å¾ªç¯ï¼‰

Agent è‡ªåŠ¨æ‰§è¡Œï¼š
1. ç”Ÿæˆ C# ä»£ç æ–‡ä»¶åˆ° `Assets/AutoGenerated/RoadGenerator/`
2. è§¦å‘ç¼–è¯‘ï¼Œç­‰å¾…ç»“æœ
3. å¦‚æœ‰ç¼–è¯‘é”™è¯¯ï¼Œè‡ªåŠ¨åˆ†æå¹¶ä¿®å¤
4. ç¼–å†™å¹¶è¿è¡Œ NUnit å•å…ƒæµ‹è¯•

**ä½ éœ€è¦åšçš„**: ç­‰å¾…ï¼Œè§‚å¯Ÿ Agent çš„ ReAct è¾“å‡ºã€‚

### Step 5: Phase 3 â€” VERIFYï¼ˆéªŒè¯å¾ªç¯ï¼‰

Agent è‡ªåŠ¨æ‰§è¡Œï¼š
1. å¤‡ä»½å½“å‰åœºæ™¯
2. æ‰§è¡Œç”Ÿæˆçš„å·¥å…·
3. æˆªå– SceneView / GameView æˆªå›¾
4. åˆ†ææ—¥å¿—
5. ç»¼åˆåˆ¤å®šæ˜¯å¦é€šè¿‡

### Step 6: Phase 4 â€” DELIVERï¼ˆäº¤ä»˜ï¼‰

Agent è¾“å‡ºï¼š
- ğŸ“ æ–‡ä»¶æ¸…å• & è¯´æ˜
- ğŸ“– ä½¿ç”¨æŒ‡å—ï¼ˆMenuItem è·¯å¾„ã€å‚æ•°è¯´æ˜ï¼‰
- ğŸ“¸ æœ€ç»ˆæˆªå›¾
- ğŸ“Š å•å…ƒæµ‹è¯•æŠ¥å‘Š
- â“ "æ˜¯å¦æ»¡æ„ï¼Ÿéœ€è¦è°ƒæ•´å—ï¼Ÿ"

---

## 11. å¸¸è§é—®é¢˜

### Q1: MCP Server è¿æ¥å¤±è´¥ï¼Ÿ

**æ£€æŸ¥**:
1. Unity Editor æ˜¯å¦å·²æ‰“å¼€ï¼Ÿ
2. Unity-MCP-Plugin æ˜¯å¦å·²å®‰è£…ï¼Ÿï¼ˆæ£€æŸ¥ Unity Console æ˜¯å¦æœ‰ `[MCP]` ç›¸å…³æ—¥å¿—ï¼‰
3. ç«¯å£æ˜¯å¦å†²çªï¼Ÿå°è¯•ä¿®æ”¹ `MCP_PLUGIN_PORT` ä¸ºå…¶ä»–ç«¯å£ï¼ˆå¦‚ `8090`ï¼‰
4. æ‰‹åŠ¨æµ‹è¯•: `unity-mcp-server --client-transport=stdio --port=8080`

### Q2: Agent æ²¡æœ‰æŒ‰ ReAct æµç¨‹å·¥ä½œï¼Ÿ

**åŸå› **: AI å®¢æˆ·ç«¯å¯èƒ½æ²¡æœ‰æ­£ç¡®åŠ è½½ Promptã€‚

**è§£å†³**: æ‰‹åŠ¨è·å– Prompt å†…å®¹å¹¶ç²˜è´´åˆ°å¯¹è¯å¼€å¤´ï¼š
```
è¯·è°ƒç”¨ MCP tool è·å– prompt "react-dev-agent" çš„å†…å®¹ï¼Œç„¶åä¸¥æ ¼æŒ‰ç…§å…¶ä¸­å®šä¹‰çš„å››é˜¶æ®µæµç¨‹å·¥ä½œã€‚
```

### Q3: ç¼–è¯‘å Agent æ–­è¿ï¼Ÿ

**åŸå› **: Domain Reload å¯¼è‡´ SignalR è¿æ¥é‡ç½®ã€‚

**è§£å†³**: 
- `script-update-or-create` å·²å†…ç½® Processing æ¨¡å¼è‡ªåŠ¨å¤„ç†
- å¦‚æœç¡®å®æ–­è¿ï¼ŒAgent å¯é€šè¿‡ `agent-task-load` æ¢å¤ä¹‹å‰çš„è¿›åº¦

### Q4: å¦‚ä½•è‡ªå®šä¹‰å¼€å‘å…¶ä»–å·¥å…·ï¼ˆéé“è·¯ç”Ÿæˆï¼‰ï¼Ÿ

åªéœ€åŠ è½½ `react-dev-agent` æ ¸å¿ƒ Promptï¼Œä¸åŠ è½½ `road-generation-tool`ï¼š

```
è¯·ä½¿ç”¨ MCP prompt "react-dev-agent"ã€‚
ä»»åŠ¡ï¼šå¸®æˆ‘å¼€å‘ä¸€ä¸ª [ä½ çš„å·¥å…·æè¿°]ã€‚
```

Agent ä¼šåœ¨ Phase 1 (SPEC) é˜¶æ®µè‡ªåŠ¨æ”¶é›†ä½ çš„éœ€æ±‚ã€‚

### Q5: å¦‚ä½•ç¼–å†™æ–°çš„é¢†åŸŸ Promptï¼Ÿ

å‚è€ƒ `DevAgent.RoadGeneration.cs` çš„ç»“æ„ï¼Œåˆ›å»ºæ–°çš„ partial class æ–‡ä»¶ï¼š

```csharp
// DevAgent.YourTool.cs
public partial class Prompt_DevAgent
{
    [McpPluginPrompt(Name = "your-tool-domain", Role = Role.User)]
    [Description("Domain knowledge for your tool")]
    public string YourToolDomain()
    {
        return @"# Your Tool â€” Domain Knowledge
        
## Recommended Architecture
...

## Key APIs
...

## Validation Criteria
...";
    }
}
```

ç¼–è¯‘åå³å¯åœ¨ MCP ä¸­ä½¿ç”¨ `your-tool-domain` Promptã€‚

### Q6: SessionState æ•°æ®åœ¨ä»€ä¹ˆæ—¶å€™ä¼šä¸¢å¤±ï¼Ÿ

`UnityEditor.SessionState` æ•°æ®åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä¸¢å¤±ï¼š
- Unity Editor å…³é—­/é‡å¯
- åˆ‡æ¢ Unity é¡¹ç›®

**ä¸ä¼šä¸¢å¤±**çš„æƒ…å†µï¼š
- Domain Reloadï¼ˆç¼–è¯‘è„šæœ¬ï¼‰
- è¿›å…¥/é€€å‡º PlayMode

è¿™æ­£å¥½æ»¡è¶³ Agent ä»»åŠ¡çŠ¶æ€çš„éœ€æ±‚ â€” åŒä¸€ä¸ªå¼€å‘ä¼šè¯å†…çš„çŠ¶æ€ä¿æŒã€‚

---

## é™„å½• A: å·¥å…·å¿«é€Ÿå‚è€ƒ

| å·¥å…· ID | ç”¨é€” | é˜¶æ®µ |
|---------|------|------|
| `script-update-or-create` | å†™å…¥ C# è„šæœ¬ + è‡ªåŠ¨ç¼–è¯‘ | BUILD |
| `script-read` | è¯»å–è„šæœ¬å†…å®¹ | BUILD |
| `script-execute` | Roslyn åŠ¨æ€æ‰§è¡Œï¼ˆæ—  Domain Reloadï¼‰ | VERIFY |
| `compilation-status` | æŸ¥è¯¢ç¼–è¯‘çŠ¶æ€ | BUILD |
| `console-get-logs` | è·å– Console æ—¥å¿— | BUILD / VERIFY |
| `screenshot-scene-view` | SceneView æˆªå›¾ | VERIFY |
| `screenshot-game-view` | GameView æˆªå›¾ | VERIFY |
| `editor-application-set-state` | è¿›å…¥/é€€å‡º PlayMode | VERIFY |
| `editor-application-get-state` | æŸ¥è¯¢ç¼–è¾‘å™¨çŠ¶æ€ | ANY |
| `scene-save` | ä¿å­˜åœºæ™¯ | VERIFY |
| `scene-save-backup` | å¤‡ä»½åœºæ™¯ | VERIFY |
| `scene-restore-backup` | æ¢å¤åœºæ™¯å¤‡ä»½ | VERIFY |
| `agent-task-save` | ä¿å­˜ Agent çŠ¶æ€ | ANY |
| `agent-task-load` | åŠ è½½ Agent çŠ¶æ€ | ANY |
| `tests-run` | è¿è¡Œ NUnit æµ‹è¯• | BUILD / VERIFY |
| `gameobject-create` | åˆ›å»º GameObject | VERIFY |
| `gameobject-find` | æŸ¥æ‰¾ GameObject | VERIFY |
| `gameobject-component-add` | æ·»åŠ ç»„ä»¶ | VERIFY |
| `assets-create-folders` | åˆ›å»ºæ–‡ä»¶å¤¹ | BUILD |
| `package-add` | æ·»åŠ  UPM åŒ… | BUILD |

---

## é™„å½• B: ç›¸å…³æ–‡ä»¶ç´¢å¼•

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| è§„æ ¼è¯´æ˜ä¹¦ | `openspec/specs/dev/spec.md` | UDA å®Œæ•´æŠ€æœ¯è§„æ ¼ |
| æœ¬æŒ‡å— | `openspec/specs/dev/GUIDE.md` | å·¥ä½œæ€»ç»“ & ä½¿ç”¨æŒ‡å— |
| æ ¸å¿ƒ Prompt | `Unity-MCP-Plugin/.../Prompt/DevAgent.cs` | ReAct ç­–ç•¥å®šä¹‰ |
| é“è·¯ç”Ÿæˆ Prompt | `Unity-MCP-Plugin/.../Prompt/DevAgent.RoadGeneration.cs` | é¢†åŸŸçŸ¥è¯† |
| ä»»åŠ¡æŒä¹…åŒ– | `Unity-MCP-Plugin/.../Tool/AgentTask.*.cs` | save/load å®ç° |
| ç¼–è¯‘çŠ¶æ€ | `Unity-MCP-Plugin/.../Tool/Compilation.*.cs` | status å®ç° |
| åœºæ™¯å¤‡ä»½ | `Unity-MCP-Plugin/.../Tool/Scene.Backup.*.cs` | save/restore å®ç° |
| å®‰è£…æŒ‡å— | `Unity-MCP-Server/INSTALLATION.md` | Server å®‰è£… & é…ç½® |
